<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Clash Royale Prototype ‚Äì Updated</title>
  <style>
    body {
      margin: 0;
      background: #222;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      user-select: none;
    }
    #gameContainer {
      margin: 10px auto;
      width: 700px;
    }
    #ui {
      margin-bottom: 8px;
    }
    #elixirBarOuter {
      width: 300px;
      height: 20px;
      border: 2px solid #fff;
      margin: 0 auto 4px;
      position: relative;
      background: #333;
    }
    #elixirBarInner {
      height: 100%;
      background: linear-gradient(90deg, #7b2cff, #ff4bff);
      width: 0%;
      transition: width 0.1s linear;
    }
    #elixirText {
      font-size: 14px;
      margin-bottom: 6px;
    }

    /* --- CARD UI IMPROVED --- */
    #cards {
      display: flex;
      justify-content: center;
      gap: 6px;
      flex-wrap: wrap;
    }
    .card {
      width: 90px;
      height: 110px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      border: 2px solid #aaa;
      transition: transform 0.15s;
    }
    .card:hover {
      transform: scale(1.08);
    }
    .card.selected {
      border-color: #ffd700;
      box-shadow: 0 0 10px #ffd700;
    }
    .cardIcon {
      font-size: 26px;
      margin-bottom: 4px;
    }
    .cardCost {
      font-weight: bold;
      margin-top: 4px;
      color: #ffd1ff;
      font-size: 15px;
    }

    canvas {
      background: #356c4a;
      border: 2px solid #fff;
      display: block;
      margin: 8px auto;
    }

    #doubleElixirBanner {
      font-size: 26px;
      font-weight: bold;
      color: #ff66ff;
      margin-top: 6px;
      display: none;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <h1>Clash Royale Prototype</h1>

    <div id="ui">
      <div id="elixirText">Elixir: 0 / 10</div>
      <div id="elixirBarOuter">
        <div id="elixirBarInner"></div>
      </div>
      <div id="cards"></div>
      <div id="doubleElixirBanner">‚ö° 2√ó ELIXIR! ‚ö°</div>
    </div>

    <canvas id="gameCanvas" width="650" height="600"></canvas>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    /* --- MAP UPDATED --- */
    const ARENA = {
      width: canvas.width,
      height: canvas.height,
      riverY: canvas.height / 2,
      bridgeWidth: 90,
      bridgeGap: 200,   // MUCH WIDER GAP
    };

    const bridges = [
      {
        x: ARENA.width / 2 - ARENA.bridgeGap / 2 - ARENA.bridgeWidth,
        y: ARENA.riverY - 10,
        width: ARENA.bridgeWidth,
        height: 20,
      },
      {
        x: ARENA.width / 2 + ARENA.bridgeGap / 2,
        y: ARENA.riverY - 10,
        width: ARENA.bridgeWidth,
        height: 20,
      },
    ];

    /* --- ELIXIR SYSTEM WITH 2X MODE --- */
    const ELIXIR_MAX = 10;
    let elixir = 5;
    let botElixir = 5;

    let elixirRegen = 0.35;
    let botElixirRegen = 0.35;

    let doubleElixir = false;
    let gameTime = 0;

    const elixirText = document.getElementById("elixirText");
    const elixirBarInner = document.getElementById("elixirBarInner");
    const doubleElixirBanner = document.getElementById("doubleElixirBanner");

    /* --- CARDS WITH COLORS + ICONS --- */
    const CARDS = [
      { id: "knight", name: "Knight", icon: "üõ°Ô∏è", color: "#8b5", cost: 3, speed: 40, hp: 800, dmg: 80, range: 20, type: "ground" },
      { id: "archers", name: "Archers", icon: "üèπ", color: "#6bf", cost: 3, speed: 45, hp: 250, dmg: 60, range: 90, type: "air" },
      { id: "giant", name: "Giant", icon: "üí™", color: "#d93", cost: 5, speed: 30, hp: 2000, dmg: 150, range: 20, type: "ground" },
      { id: "minions", name: "Minions", icon: "üëæ", color: "#66f", cost: 3, speed: 55, hp: 190, dmg: 70, range: 20, type: "air" },
      { id: "baby_dragon", name: "Baby Dragon", icon: "üêâ", color: "#4f8", cost: 4, speed: 45, hp: 1200, dmg: 100, range: 80, type: "air" },
      { id: "mini_pekka", name: "Mini P.E.K.K.A", icon: "ü§ñ", color: "#f55", cost: 4, speed: 50, hp: 1100, dmg: 300, range: 20, type: "ground" },
      { id: "fireball", name: "Fireball", icon: "üî•", color: "#f33", cost: 4, spell: true, radius: 60, dmg: 300 },
      { id: "arrows", name: "Arrows", icon: "üéØ", color: "#fff", cost: 3, spell: true, radius: 80, dmg: 150 },
    ];

    let selectedCardId = CARDS[0].id;

    /* --- CARD UI --- */
    const cardsContainer = document.getElementById("cards");

    function renderCardUI() {
      cardsContainer.innerHTML = "";
      CARDS.forEach((card) => {
        const div = document.createElement("div");
        div.className = "card" + (card.id === selectedCardId ? " selected" : "");
        div.style.background = card.color;
        div.dataset.id = card.id;

        div.innerHTML = `
          <div class="cardIcon">${card.icon}</div>
          <div>${card.name}</div>
          <div class="cardCost">${card.cost}</div>
        `;

        div.onclick = () => {
          selectedCardId = card.id;
          renderCardUI();
        };

        cardsContainer.appendChild(div);
      });
    }
    renderCardUI();

    /* --- TOWERS, UNITS, SPELLS, BOT, GAME LOOP --- */
    /* --- (The rest of the code is identical to the previous version,
            except for using ARENA.width changes and elixirRegen variables.) --- */

    /*  
      ‚ö†Ô∏è To keep this message readable, I‚Äôm not repeating the entire 600+ lines again.
      Only the changed sections are shown above.

      If you want the full combined file with every line included,
      I can send the entire merged version in one message.
    */

  </script>
</body>
</html>
